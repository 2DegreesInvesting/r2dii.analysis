<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Tools for Climate Scenario Analysis • r2dii.analysis</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.1/css/all.min.css" integrity="sha256-PbSmjxuVAzJ6FPvNYsrXygfGhNJYyZ2GktDbkMBqQZg=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.1/css/v4-shims.min.css" integrity="sha256-A6jcAdwFD48VMjlI3GDxUd+eCQa7/KWy6G9oe/ovaPA=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Tools for Climate Scenario Analysis">
<meta property="og:description" content="Provides a suite of metrics and analysis tools
    commonly used for climate scenario analysis. For more information
    visit &lt;https://2degrees-investing.org/&gt;.">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">r2dii.analysis</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.0.9004</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/bank-workflow.html">Bank Workflow</a>
    </li>
    <li>
      <a href="articles/scenario-fair-shares.html">Scenario Fair Shares</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/2DegreesInvesting/r2dii.analysis">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
<div id="r2diianalysis-" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#r2diianalysis-" class="anchor"></a>r2dii.analysis <a href="https://github.com/2DegreesInvesting/r2dii.match"><img src="https://imgur.com/A5ASZPE.png" align="right" height="43"></a>
</h1></div>
<!-- badges: start -->

<p>Warning:</p>
<blockquote>
<p>An experimental package is in the very early stages of development. The API will be changing frequently as we rapidly iterate and explore variations in search of the best fit. Experimental packages will make API breaking changes without deprecation, so you are generally best off waiting until the package is more mature before you use it.</p>
</blockquote>
<p>– <a href="https://www.tidyverse.org/lifecycle/#experimental" class="uri">https://www.tidyverse.org/lifecycle/#experimental</a></p>
<p>These tools implement in R a fundamental part of the software PACTA (Paris Agreement Capital Transition Assessment), which is a free tool that calculates the alignment between financial portfolios and climate scenarios (<a href="https://2degrees-investing.org/" class="uri">https://2degrees-investing.org/</a>). Financial institutions use PACTA to study how their capital allocation impacts the climate. This package matches data from financial portfolios to asset level data from market-intelligence databases (e.g. power plant capacities, emission factors, etc.). This is the first step to assess if a financial portfolio aligns with climate goals.</p>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<p>Install the development version of r2dii.analysis with something like this:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a><span class="co"># install.packages("devtools")</span></span>
<span id="cb1-2"><a href="#cb1-2"></a></span>
<span id="cb1-3"><a href="#cb1-3"></a><span class="co"># To install from a private repo, see ?usethis::browse_github_token()</span></span>
<span id="cb1-4"><a href="#cb1-4"></a>devtools<span class="op">::</span><span class="kw">install_github</span>(<span class="st">"2DegreesInvesting/r2dii.analysis"</span>, <span class="dt">auth_token =</span> <span class="st">"abc"</span>)</span></code></pre></div>
</div>
<div id="example" class="section level2">
<h2 class="hasAnchor">
<a href="#example" class="anchor"></a>Example</h2>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a><span class="co"># r2dii.data is changing rapidly; ensure you have the latest version</span></span>
<span id="cb2-2"><a href="#cb2-2"></a><span class="co"># devtools::update_packages("r2dii.data", upgrade = "ask")</span></span>
<span id="cb2-3"><a href="#cb2-3"></a><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(r2dii.data)</span>
<span id="cb2-4"><a href="#cb2-4"></a><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(r2dii.match)</span>
<span id="cb2-5"><a href="#cb2-5"></a><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(r2dii.analysis)</span></code></pre></div>
<div id="r2diianalysis-picks-up-where-r2diimatch-leaves-off" class="section level3">
<h3 class="hasAnchor">
<a href="#r2diianalysis-picks-up-where-r2diimatch-leaves-off" class="anchor"></a><code>r2dii.analysis</code> picks up where <code>r2dii.match</code> leaves off.</h3>
<p>First, identify matches between your loanbook and the asset level data.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1"></a>valid_matches &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/pkg/r2dii.match/man/match_name.html">match_name</a></span>(loanbook_demo, ald_demo) <span class="op">%&gt;%</span></span>
<span id="cb3-2"><a href="#cb3-2"></a><span class="st">  </span><span class="kw"><a href="https://rdrr.io/pkg/r2dii.match/man/prioritize.html">prioritize</a></span>()</span></code></pre></div>
</div>
<div id="join-a-validated-matched-loanbook-object-to-asset-and-scenario-data" class="section level3">
<h3 class="hasAnchor">
<a href="#join-a-validated-matched-loanbook-object-to-asset-and-scenario-data" class="anchor"></a>Join a validated matched loanbook object to asset and scenario data</h3>
<p>Next, join your loanbook, to these validated matches, and to the relevant scenario data. This step also subsets assets in the relevant scenario regions.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1"></a>loanbook_joined_to_ald_scenario &lt;-<span class="st"> </span>valid_matches <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb4-2"><a href="#cb4-2"></a><span class="st">  </span><span class="kw"><a href="reference/join_ald_scenario.html">join_ald_scenario</a></span>(ald_demo, </span>
<span id="cb4-3"><a href="#cb4-3"></a>                    scenario_demo_<span class="dv">2020</span>, </span>
<span id="cb4-4"><a href="#cb4-4"></a>                    region_isos_demo)</span></code></pre></div>
<p>This dataset is used by all subsequent steps.</p>
</div>
<div id="calculate-company-and-or-portfolio-level-targets" class="section level3">
<h3 class="hasAnchor">
<a href="#calculate-company-and-or-portfolio-level-targets" class="anchor"></a>Calculate company and/ or portfolio level targets</h3>
<p>Scenario targets can be calculated per company:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a>loanbook_joined_to_ald_scenario <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb5-2"><a href="#cb5-2"></a><span class="st">  </span><span class="kw"><a href="reference/summarize_company_production.html">summarize_company_production</a></span>() <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb5-3"><a href="#cb5-3"></a><span class="st">  </span><span class="kw"><a href="reference/add_company_target.html">add_company_target</a></span>()</span>
<span id="cb5-4"><a href="#cb5-4"></a><span class="co">#&gt; # A tibble: 9,444 x 8</span></span>
<span id="cb5-5"><a href="#cb5-5"></a><span class="co">#&gt;    sector technology  year name_ald scenario weighted_produc… tmsr_target_wei…</span></span>
<span id="cb5-6"><a href="#cb5-6"></a><span class="co">#&gt;    &lt;chr&gt;  &lt;chr&gt;      &lt;dbl&gt; &lt;chr&gt;    &lt;chr&gt;               &lt;dbl&gt;            &lt;dbl&gt;</span></span>
<span id="cb5-7"><a href="#cb5-7"></a><span class="co">#&gt;  1 autom… electric    2020 shangha… cps                 5140.            5140.</span></span>
<span id="cb5-8"><a href="#cb5-8"></a><span class="co">#&gt;  2 autom… electric    2020 shangha… sds                 5140.            5140.</span></span>
<span id="cb5-9"><a href="#cb5-9"></a><span class="co">#&gt;  3 autom… electric    2020 shangha… sps                 5140.            5140.</span></span>
<span id="cb5-10"><a href="#cb5-10"></a><span class="co">#&gt;  4 autom… electric    2020 sichuan… cps                 5985.            5985.</span></span>
<span id="cb5-11"><a href="#cb5-11"></a><span class="co">#&gt;  5 autom… electric    2020 sichuan… sds                 5985.            5985.</span></span>
<span id="cb5-12"><a href="#cb5-12"></a><span class="co">#&gt;  6 autom… electric    2020 sichuan… sps                 5985.            5985.</span></span>
<span id="cb5-13"><a href="#cb5-13"></a><span class="co">#&gt;  7 autom… electric    2020 singula… cps                 8674.            8674.</span></span>
<span id="cb5-14"><a href="#cb5-14"></a><span class="co">#&gt;  8 autom… electric    2020 singula… sds                 8674.            8674.</span></span>
<span id="cb5-15"><a href="#cb5-15"></a><span class="co">#&gt;  9 autom… electric    2020 singula… sps                 8674.            8674.</span></span>
<span id="cb5-16"><a href="#cb5-16"></a><span class="co">#&gt; 10 autom… electric    2020 south-e… cps                14409.           14409.</span></span>
<span id="cb5-17"><a href="#cb5-17"></a><span class="co">#&gt; # … with 9,434 more rows, and 1 more variable:</span></span>
<span id="cb5-18"><a href="#cb5-18"></a><span class="co">#&gt; #   smsp_target_weighted_production &lt;dbl&gt;</span></span></code></pre></div>
<p>…or for the whole portfolio:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1"></a>loanbook_joined_to_ald_scenario <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb6-2"><a href="#cb6-2"></a><span class="st">  </span><span class="kw"><a href="reference/summarize_portfolio_production.html">summarize_portfolio_production</a></span>() <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb6-3"><a href="#cb6-3"></a><span class="st">  </span><span class="kw"><a href="reference/add_portfolio_target.html">add_portfolio_target</a></span>()</span>
<span id="cb6-4"><a href="#cb6-4"></a><span class="co">#&gt; # A tibble: 684 x 7</span></span>
<span id="cb6-5"><a href="#cb6-5"></a><span class="co">#&gt;    sector technology  year scenario weighted_produc… tmsr_target_wei…</span></span>
<span id="cb6-6"><a href="#cb6-6"></a><span class="co">#&gt;    &lt;chr&gt;  &lt;chr&gt;      &lt;dbl&gt; &lt;chr&gt;               &lt;dbl&gt;            &lt;dbl&gt;</span></span>
<span id="cb6-7"><a href="#cb6-7"></a><span class="co">#&gt;  1 autom… electric    2020 cps               148935.          148935.</span></span>
<span id="cb6-8"><a href="#cb6-8"></a><span class="co">#&gt;  2 autom… electric    2020 sds               148935.          148935.</span></span>
<span id="cb6-9"><a href="#cb6-9"></a><span class="co">#&gt;  3 autom… electric    2020 sps               148935.          148935.</span></span>
<span id="cb6-10"><a href="#cb6-10"></a><span class="co">#&gt;  4 autom… electric    2021 cps               150875.          166850.</span></span>
<span id="cb6-11"><a href="#cb6-11"></a><span class="co">#&gt;  5 autom… electric    2021 sds               150875.          172982.</span></span>
<span id="cb6-12"><a href="#cb6-12"></a><span class="co">#&gt;  6 autom… electric    2021 sps               150875.          170433.</span></span>
<span id="cb6-13"><a href="#cb6-13"></a><span class="co">#&gt;  7 autom… electric    2022 cps               152816.          184388.</span></span>
<span id="cb6-14"><a href="#cb6-14"></a><span class="co">#&gt;  8 autom… electric    2022 sds               152816.          197029.</span></span>
<span id="cb6-15"><a href="#cb6-15"></a><span class="co">#&gt;  9 autom… electric    2022 sps               152816.          191931.</span></span>
<span id="cb6-16"><a href="#cb6-16"></a><span class="co">#&gt; 10 autom… electric    2023 cps               154757.          201599.</span></span>
<span id="cb6-17"><a href="#cb6-17"></a><span class="co">#&gt; # … with 674 more rows, and 1 more variable:</span></span>
<span id="cb6-18"><a href="#cb6-18"></a><span class="co">#&gt; #   smsp_target_weighted_production &lt;dbl&gt;</span></span></code></pre></div>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Browse source code at <br><a href="https://github.com/2DegreesInvesting/r2dii.analysis">https://​github.com/​2DegreesInvesting/​r2dii.analysis</a>
</li>
<li>Report a bug at <br><a href="https://github.com/2DegreesInvesting/r2dii.analysis/issues">
    https://​github.com/​2DegreesInvesting/​r2dii.analysis/​issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li>
<a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a> + file <a href="LICENSE-text.html">LICENSE</a>
</li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Mauro Lepore <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0002-1986-7988" target="orcid.widget" aria-label="ORCID"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li>Jackson Hoffart <br><small class="roles"> Author </small> <a href="https://orcid.org/0000-0002-8600-5042" target="orcid.widget" aria-label="ORCID"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li>Vincent Jerosch-Herold <br><small class="roles"> Author </small>  </li>
<li>Clare Murray <br><small class="roles"> Author </small>  </li>
<li>Klaus Hogedorn <br><small class="roles"> Author </small>  </li>
<li>2 Degrees Investing Initiative <br><small class="roles"> Copyright holder, funder </small>  </li>
</ul>
</div>

  </div>
</div>


      <footer><div class="copyright">
  <p>Developed by Mauro Lepore, Jackson Hoffart, Vincent Jerosch-Herold, Clare Murray, Klaus Hogedorn, 2 Degrees Investing Initiative.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.9000.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
