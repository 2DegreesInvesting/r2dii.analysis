---
title: "Market Share Approach"
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

```{r setup}
library(r2dii.data)
library(r2dii.analysis)
```

## Scenario Market Shares

Scenario efforts must be allocated to the portfolio's production profile. To do this, two principles are currently implemented:

1. Technology Market Share:

$$p_{i}^{tmsr}(t) = p_{i}(t_0) * \dfrac{s_i(t)}{s_i(t_0)}$$

where:

* $s_i(t)$ is the scenario production for technology $i$ at time $t$,
* $p_{i}(t_0)$ is the production allocated to the portfolio for some technology, $i$ at time $t_0$, and
* $p_{i}^{tmsr}(t)$ is the portfolio-specific target production for that technology.

We define the "Technology Market Share Ratio" as:

$$\dfrac{s_i(t)}{s_i(t_0)}$$

2. Sector Market Share:

$$p_{i}^{smsp}(t) = p_{i}(t_0) +P(t_0) * \left( \dfrac{s_i(t)-s_i(t_0)}{S(t_0)}\right)$$
where:

* $P_i(t_0)$ is the portfolio's total production in the sector at $t_0$, and
* $S(t_0)$ is the scenario total production at $t_0$.

We define the "Sector Market Share Percentage" as:

$$\dfrac{s_i(t)-s_i(t_0)}{S(t_0)}$$

## Calculation

These market shares are pre-calculated, and can be seen by calling: 

```{r}
r2dii.data::scenario_demo_2020
```
